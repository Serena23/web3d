##Il modello 3D

Questa sezione è dedicata alla realizzazione di oggetti 3D, a partire dalle slice Dicom selezionabili all’interno dell’editor grafico.

##Realizzazione di un modello 3D



##Dettagli implementativi

Per l’implementazione del modello è stato utilizzato Three.js, una libreria Open Source che facilita lo sviluppo di applicazioni 3D basate su WebGl.

Tra i vari oggetti della libreria che sono stati utilizzati, vi è l’oggetto Path che rappresenta un percorso di punti (generato dall’utente tramite i plugin forniti dall’editor) dal quale viene creato un contorno che a sua volta verrà convertito in una Shape ovvero in un riempimento di quel contorno tramite triangolazione.

All’oggetto Shape appena creato, viene poi applicato un processo di estrusione che assegna uno spessore all’oggetto, generando i triangoli necessari per il riempimento.

Tale funzionalità è stata realizzata utilizzando il metodo ExtrudeGeometry della libreria Three.js, che prende in ingresso lo Shape, lo spessore da dare all’oggetto, il materiale di estrusione e il numero di materiali impiegati e restituisce l’oggetto in ingresso con un certo spessore.

Dalla slice Dicom su cui l’utente sta lavorando, viene poi creata una Texture ed eseguito il mapping di quest’ultima sul modello.

Per consentire il corretto mapping della texture al modello è stato necessario calcolare le coordinate Texture operando opportuni ridimensionamenti che consentissero di gestire il caricamento di immagini Dicom di dimensioni variabili e non necessariamente coincidenti con le dimensioni della Canvas.
In particolare, le coordinate Texture vengono fatte corrispondere alla posizione del vertice diviso la dimensione della texture.

A questo punto viene unita la geometria e la texture per creare la Mesh ovvero un oggetto da renderizzare con posizioni, coordinate texture e normali e a cui viene applicato un materiale composto da un colore e una Texture.

La Mesh creata viene poi spostata sull’asse z per posizionarsi in corrispondenza della slice relativa.

Tutte le Mesh vengono aggiunte alla scena e quindi renderizzate.

Il risultato sarà l’oggetto 3D che approssima il modello ottenuto operando una sovrapposizione delle varie slice.

Dettagli sulla libreria Three:

  • La navigazione della scena tramite mouse è stata implementata attraverso  l’oggetto TrackballControls della libreria Three.js che consente di muovere la camera (posizionata al centro dell’oggetto 3D) sulla scena in funzione dei movimenti del mouse.
  
  • Altro oggetto di interesse che è stato utilizzato è PointLight; si tratta di un oggetto della libreria Three.js a cui viene assegnato un colore, una posizione e quindi aggiunto alla scena per consentire di migliorare la visione all’interno della stessa.


###Sono descritte di seguito alcune funzioni importanti:

####nomeFunzione()
descrizione